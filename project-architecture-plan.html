<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Platform Architecture Plan ‚Äî Azure</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap');

  :root {
    --bg: #0a0c10;
    --surface: #111318;
    --border: #1e2330;
    --accent: #00d4ff;
    --accent2: #7c3aed;
    --accent3: #10b981;
    --accent4: #f59e0b;
    --text: #e2e8f0;
    --muted: #64748b;
    --danger: #ef4444;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Syne', sans-serif;
    line-height: 1.6;
  }

  .hero {
    background: linear-gradient(135deg, #0a0c10 0%, #0d1020 50%, #0a0f1a 100%);
    border-bottom: 1px solid var(--border);
    padding: 60px 40px 40px;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute;
    top: -100px; right: -100px;
    width: 400px; height: 400px;
    background: radial-gradient(circle, rgba(0,212,255,0.08) 0%, transparent 70%);
    pointer-events: none;
  }
  .hero::after {
    content: '';
    position: absolute;
    bottom: -50px; left: 200px;
    width: 300px; height: 300px;
    background: radial-gradient(circle, rgba(124,58,237,0.06) 0%, transparent 70%);
    pointer-events: none;
  }

  .badge {
    display: inline-block;
    background: rgba(0,212,255,0.1);
    border: 1px solid rgba(0,212,255,0.3);
    color: var(--accent);
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    padding: 4px 12px;
    border-radius: 2px;
    letter-spacing: 2px;
    margin-bottom: 16px;
  }

  h1 {
    font-size: clamp(28px, 5vw, 52px);
    font-weight: 800;
    line-height: 1.1;
    margin-bottom: 12px;
  }
  h1 span { color: var(--accent); }

  .hero-sub {
    color: var(--muted);
    font-size: 15px;
    font-family: 'Space Mono', monospace;
    margin-bottom: 30px;
  }

  .tech-pills {
    display: flex; flex-wrap: wrap; gap: 8px;
  }
  .pill {
    background: var(--surface);
    border: 1px solid var(--border);
    padding: 5px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    color: var(--muted);
  }
  .pill.azure { border-color: rgba(0,212,255,0.4); color: var(--accent); }
  .pill.react { border-color: rgba(16,185,129,0.4); color: var(--accent3); }
  .pill.node { border-color: rgba(245,158,11,0.4); color: var(--accent4); }

  nav {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: 0 40px;
    display: flex;
    gap: 4px;
    overflow-x: auto;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .nav-btn {
    background: none;
    border: none;
    color: var(--muted);
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 600;
    padding: 14px 16px;
    cursor: pointer;
    white-space: nowrap;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    letter-spacing: 0.5px;
  }
  .nav-btn:hover { color: var(--text); }
  .nav-btn.active { color: var(--accent); border-bottom-color: var(--accent); }

  .container { max-width: 1200px; margin: 0 auto; padding: 0 40px; }

  .section {
    display: none;
    padding: 40px 0;
  }
  .section.active { display: block; }

  h2 {
    font-size: 24px;
    font-weight: 800;
    margin-bottom: 6px;
  }
  .section-desc { color: var(--muted); font-size: 14px; margin-bottom: 32px; font-family: 'Space Mono', monospace; }

  /* CARDS */
  .grid { display: grid; gap: 16px; }
  .grid-2 { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
  .grid-3 { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 24px;
    position: relative;
    overflow: hidden;
  }
  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
  }
  .card.cyan::before { background: linear-gradient(90deg, var(--accent), transparent); }
  .card.purple::before { background: linear-gradient(90deg, var(--accent2), transparent); }
  .card.green::before { background: linear-gradient(90deg, var(--accent3), transparent); }
  .card.amber::before { background: linear-gradient(90deg, var(--accent4), transparent); }
  .card.red::before { background: linear-gradient(90deg, var(--danger), transparent); }

  .card-icon {
    font-size: 28px;
    margin-bottom: 12px;
    display: block;
  }
  .card h3 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .card p {
    font-size: 13px;
    color: var(--muted);
    line-height: 1.5;
  }
  .card ul {
    list-style: none;
    margin-top: 10px;
  }
  .card ul li {
    font-size: 12px;
    color: var(--muted);
    padding: 3px 0;
    font-family: 'Space Mono', monospace;
  }
  .card ul li::before { content: '‚Üí '; color: var(--accent); }

  /* SCHEMA TABLE */
  .schema-block {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 16px;
    overflow: hidden;
  }
  .schema-header {
    background: rgba(255,255,255,0.03);
    border-bottom: 1px solid var(--border);
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .schema-header h3 {
    font-size: 14px;
    font-weight: 700;
    font-family: 'Space Mono', monospace;
  }
  .tag {
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 10px;
    font-family: 'Space Mono', monospace;
    font-weight: 700;
  }
  .tag.pk { background: rgba(245,158,11,0.15); color: var(--accent4); }
  .tag.fk { background: rgba(124,58,237,0.15); color: #a78bfa; }
  .tag.idx { background: rgba(16,185,129,0.15); color: var(--accent3); }
  .tag.col { background: rgba(0,212,255,0.1); color: var(--accent); }

  .schema-fields {
    padding: 0;
  }
  .field-row {
    display: grid;
    grid-template-columns: 180px 120px 1fr;
    padding: 8px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.03);
    font-family: 'Space Mono', monospace;
    font-size: 12px;
    align-items: center;
    gap: 12px;
  }
  .field-row:last-child { border-bottom: none; }
  .field-name { color: var(--text); }
  .field-type { color: var(--accent3); }
  .field-desc { color: var(--muted); }

  /* NETWORK DIAGRAM */
  .diagram {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 30px;
    position: relative;
  }

  .layer {
    margin-bottom: 24px;
    position: relative;
  }
  .layer-label {
    font-size: 10px;
    font-family: 'Space Mono', monospace;
    letter-spacing: 2px;
    color: var(--muted);
    margin-bottom: 10px;
    text-transform: uppercase;
  }
  .layer-nodes {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
  }
  .node {
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 10px 16px;
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    text-align: center;
    transition: border-color 0.2s;
  }
  .node:hover { border-color: var(--accent); }
  .node.accent { border-color: rgba(0,212,255,0.4); color: var(--accent); }
  .node.purple { border-color: rgba(124,58,237,0.4); color: #a78bfa; }
  .node.green { border-color: rgba(16,185,129,0.4); color: var(--accent3); }
  .node.amber { border-color: rgba(245,158,11,0.4); color: var(--accent4); }

  .arrow {
    color: var(--muted);
    font-size: 20px;
    padding: 0 4px;
  }
  .layer-connector {
    text-align: center;
    font-size: 20px;
    color: var(--border);
    margin: 4px 0;
  }

  /* ROLES */
  .role-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
  }
  .role-header {
    padding: 16px 20px;
    font-weight: 700;
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .role-header.admin { background: rgba(239,68,68,0.08); border-bottom: 1px solid rgba(239,68,68,0.2); }
  .role-header.manager { background: rgba(245,158,11,0.08); border-bottom: 1px solid rgba(245,158,11,0.2); }
  .role-header.user { background: rgba(16,185,129,0.08); border-bottom: 1px solid rgba(16,185,129,0.2); }
  .role-body { padding: 16px 20px; }
  .role-body li {
    font-size: 13px;
    color: var(--muted);
    padding: 3px 0;
    list-style: none;
  }
  .role-body li::before { content: '‚úì '; color: var(--accent3); font-weight: bold; }

  /* SCREENS LIST */
  .screen-group { margin-bottom: 24px; }
  .screen-group h3 {
    font-size: 13px;
    font-family: 'Space Mono', monospace;
    letter-spacing: 1px;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 10px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--border);
  }
  .screen-list {
    display: flex; flex-wrap: wrap; gap: 8px;
  }
  .screen-chip {
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 6px 14px;
    font-size: 12px;
    font-family: 'Space Mono', monospace;
    color: var(--text);
  }
  .screen-chip.highlight { border-color: rgba(0,212,255,0.3); color: var(--accent); }

  /* PRIZE POOL HIGHLIGHT */
  .highlight-box {
    background: rgba(124,58,237,0.08);
    border: 1px solid rgba(124,58,237,0.3);
    border-radius: 8px;
    padding: 20px;
    margin: 16px 0;
  }
  .highlight-box h4 { color: #a78bfa; margin-bottom: 8px; font-size: 14px; }
  .highlight-box p { font-size: 13px; color: var(--muted); }
  .highlight-box code {
    background: rgba(124,58,237,0.15);
    color: #c4b5fd;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Space Mono', monospace;
    font-size: 12px;
  }

  .note {
    background: rgba(245,158,11,0.06);
    border-left: 3px solid var(--accent4);
    padding: 12px 16px;
    border-radius: 0 6px 6px 0;
    font-size: 13px;
    color: var(--muted);
    margin-top: 16px;
  }

  @media (max-width: 600px) {
    .hero, .container { padding-left: 20px; padding-right: 20px; }
    nav { padding: 0 10px; }
    .field-row { grid-template-columns: 1fr 1fr; }
    .field-desc { display: none; }
  }
</style>
</head>
<body>

<div class="hero">
  <div class="badge">v1.0 ‚Äî AZURE MIGRATION</div>
  <h1>Platform <span>Architecture</span><br>& System Design</h1>
  <p class="hero-sub">// schema ¬∑ network ¬∑ frontend ¬∑ roles ¬∑ azure infra</p>
  <div class="tech-pills">
    <span class="pill azure">‚òÅ Azure</span>
    <span class="pill react">‚öõ React</span>
    <span class="pill node">‚¨° Node.js</span>
    <span class="pill">üóÑ PostgreSQL</span>
    <span class="pill">üî¥ Redis</span>
    <span class="pill">üì° WebSocket</span>
    <span class="pill">üîê JWT + RBAC</span>
  </div>
</div>

<nav>
  <button class="nav-btn active" onclick="show('overview')">Overview</button>
  <button class="nav-btn" onclick="show('schema')">DB Schema</button>
  <button class="nav-btn" onclick="show('network')">Network Design</button>
  <button class="nav-btn" onclick="show('frontend')">Frontend Screens</button>
  <button class="nav-btn" onclick="show('roles')">Roles & Permissions</button>
  <button class="nav-btn" onclick="show('admin-config')">Admin Config</button>
  <button class="nav-btn" onclick="show('prize')">Prize Pool</button>
  <button class="nav-btn" onclick="show('infra')">Azure Infra</button>
</nav>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ OVERVIEW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="overview" class="section active">
<div class="container">
  <h2>System Overview</h2>
  <p class="section-desc">// high-level platform architecture with Azure-first approach</p>

  <div class="grid grid-3" style="margin-bottom:24px;">
    <div class="card cyan">
      <span class="card-icon">üèó</span>
      <h3>Architecture Pattern</h3>
      <p>Microservices-ready monorepo. REST + WebSocket API. Azure App Service for hosting, Azure PostgreSQL as primary DB.</p>
    </div>
    <div class="card purple">
      <span class="card-icon">üë•</span>
      <h3>3-Tier User System</h3>
      <p>Admin ‚Üí Manager/Agent ‚Üí Users (Tiers). Full RBAC with JWT. Every role has isolated frontend views.</p>
    </div>
    <div class="card green">
      <span class="card-icon">‚öôÔ∏è</span>
      <h3>Dynamic Config</h3>
      <p>All secrets, keys, rates, and logic controlled from Admin Panel. Zero code changes needed for config updates.</p>
    </div>
    <div class="card amber">
      <span class="card-icon">üí∞</span>
      <h3>Prize Pool</h3>
      <p>20% of monthly ad revenue split among top 5 idle users. Admin triggers payout on scheduled date.</p>
    </div>
    <div class="card cyan">
      <span class="card-icon">üì±</span>
      <h3>Tech Stack</h3>
      <ul>
        <li>Frontend: React + Vite + TailwindCSS</li>
        <li>Backend: Node.js + Express</li>
        <li>DB: Azure PostgreSQL Flexible</li>
        <li>Cache: Azure Cache for Redis</li>
        <li>Auth: Azure AD B2C + JWT</li>
        <li>Storage: Azure Blob Storage</li>
        <li>CDN: Azure Front Door</li>
      </ul>
    </div>
    <div class="card red">
      <span class="card-icon">üö´</span>
      <h3>Why Azure over AWS</h3>
      <p>Azure Free Tier includes 12 months of free services + $200 credit. App Service Free plan available. No credit card charges for development testing.</p>
    </div>
  </div>

  <div class="note">
    üí° <strong>Development Strategy:</strong> Start with Azure Static Web Apps (free) for frontend + Azure App Service Free Tier (F1) for backend. Azure PostgreSQL Flexible Server has a free tier for 12 months. Total dev cost: $0.
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ DB SCHEMA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="schema" class="section">
<div class="container">
  <h2>Database Schema</h2>
  <p class="section-desc">// azure postgresql flexible server ‚Äî normalized relational design</p>

  <!-- USERS -->
  <div class="schema-block">
    <div class="schema-header">
      <h3>users</h3>
      <span class="tag col">core</span>
    </div>
    <div class="schema-fields">
      <div class="field-row"><span class="field-name">id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag pk">PK</span> auto-generated</span></div>
      <div class="field-row"><span class="field-name">email</span><span class="field-type">VARCHAR(255)</span><span class="field-desc">unique, indexed</span></div>
      <div class="field-row"><span class="field-name">phone</span><span class="field-type">VARCHAR(20)</span><span class="field-desc">optional, unique</span></div>
      <div class="field-row"><span class="field-name">password_hash</span><span class="field-type">VARCHAR(255)</span><span class="field-desc">bcrypt hashed</span></div>
      <div class="field-row"><span class="field-name">role</span><span class="field-type">ENUM</span><span class="field-desc">admin | manager | agent | user</span></div>
      <div class="field-row"><span class="field-name">tier_id</span><span class="field-type">INT</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí tiers.id</span></div>
      <div class="field-row"><span class="field-name">referral_code</span><span class="field-type">VARCHAR(20)</span><span class="field-desc">unique, auto-generated</span></div>
      <div class="field-row"><span class="field-name">referred_by</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id</span></div>
      <div class="field-row"><span class="field-name">status</span><span class="field-type">ENUM</span><span class="field-desc">active | suspended | banned | pending</span></div>
      <div class="field-row"><span class="field-name">kyc_status</span><span class="field-type">ENUM</span><span class="field-desc">unverified | pending | verified | rejected</span></div>
      <div class="field-row"><span class="field-name">wallet_balance</span><span class="field-type">DECIMAL(15,4)</span><span class="field-desc">current balance</span></div>
      <div class="field-row"><span class="field-name">total_earned</span><span class="field-type">DECIMAL(15,4)</span><span class="field-desc">lifetime earnings</span></div>
      <div class="field-row"><span class="field-name">idle_score_monthly</span><span class="field-type">DECIMAL(10,4)</span><span class="field-desc">resets monthly for prize pool</span></div>
      <div class="field-row"><span class="field-name">manager_id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id (assigned manager)</span></div>
      <div class="field-row"><span class="field-name">created_at</span><span class="field-type">TIMESTAMP</span><span class="field-desc">default NOW()</span></div>
      <div class="field-row"><span class="field-name">last_active</span><span class="field-type">TIMESTAMP</span><span class="field-desc">updated on every session</span></div>
    </div>
  </div>

  <!-- TIERS -->
  <div class="schema-block">
    <div class="schema-header">
      <h3>tiers</h3>
      <span class="tag col">config</span>
    </div>
    <div class="schema-fields">
      <div class="field-row"><span class="field-name">id</span><span class="field-type">INT</span><span class="field-desc"><span class="tag pk">PK</span> autoincrement</span></div>
      <div class="field-row"><span class="field-name">name</span><span class="field-type">VARCHAR(50)</span><span class="field-desc">e.g. Bronze, Silver, Gold, Platinum</span></div>
      <div class="field-row"><span class="field-name">min_deposit</span><span class="field-type">DECIMAL(10,2)</span><span class="field-desc">minimum deposit to qualify</span></div>
      <div class="field-row"><span class="field-name">daily_earning_rate</span><span class="field-type">DECIMAL(8,4)</span><span class="field-desc">% per day (admin-configurable)</span></div>
      <div class="field-row"><span class="field-name">idle_reward_rate</span><span class="field-type">DECIMAL(8,4)</span><span class="field-desc">idle session reward multiplier</span></div>
      <div class="field-row"><span class="field-name">withdrawal_limit_daily</span><span class="field-type">DECIMAL(10,2)</span><span class="field-desc">max daily withdrawal</span></div>
      <div class="field-row"><span class="field-name">referral_bonus</span><span class="field-type">DECIMAL(8,4)</span><span class="field-desc">% bonus per referral</span></div>
      <div class="field-row"><span class="field-name">is_active</span><span class="field-type">BOOLEAN</span><span class="field-desc">toggle tier visibility</span></div>
    </div>
  </div>

  <!-- TRANSACTIONS -->
  <div class="schema-block">
    <div class="schema-header">
      <h3>transactions</h3>
      <span class="tag col">financial</span>
    </div>
    <div class="schema-fields">
      <div class="field-row"><span class="field-name">id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag pk">PK</span></span></div>
      <div class="field-row"><span class="field-name">user_id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id</span></div>
      <div class="field-row"><span class="field-name">type</span><span class="field-type">ENUM</span><span class="field-desc">deposit | withdrawal | reward | bonus | prize | referral</span></div>
      <div class="field-row"><span class="field-name">amount</span><span class="field-type">DECIMAL(15,4)</span><span class="field-desc">positive = credit, negative = debit</span></div>
      <div class="field-row"><span class="field-name">status</span><span class="field-type">ENUM</span><span class="field-desc">pending | approved | rejected | processing</span></div>
      <div class="field-row"><span class="field-name">payment_method</span><span class="field-type">VARCHAR(50)</span><span class="field-desc">UPI | bank | crypto | gateway</span></div>
      <div class="field-row"><span class="field-name">gateway_txn_id</span><span class="field-type">VARCHAR(255)</span><span class="field-desc">external gateway reference</span></div>
      <div class="field-row"><span class="field-name">processed_by</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id (admin/manager)</span></div>
      <div class="field-row"><span class="field-name">metadata</span><span class="field-type">JSONB</span><span class="field-desc">additional details (screenshot, notes)</span></div>
      <div class="field-row"><span class="field-name">created_at</span><span class="field-type">TIMESTAMP</span><span class="field-desc"></span></div>
    </div>
  </div>

  <!-- IDLE SESSIONS -->
  <div class="schema-block">
    <div class="schema-header">
      <h3>idle_sessions</h3>
      <span class="tag col">tracking</span>
    </div>
    <div class="schema-fields">
      <div class="field-row"><span class="field-name">id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag pk">PK</span></span></div>
      <div class="field-row"><span class="field-name">user_id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id</span></div>
      <div class="field-row"><span class="field-name">start_time</span><span class="field-type">TIMESTAMP</span><span class="field-desc">session start</span></div>
      <div class="field-row"><span class="field-name">end_time</span><span class="field-type">TIMESTAMP</span><span class="field-desc">session end (null = active)</span></div>
      <div class="field-row"><span class="field-name">duration_seconds</span><span class="field-type">INT</span><span class="field-desc">total idle time</span></div>
      <div class="field-row"><span class="field-name">reward_earned</span><span class="field-type">DECIMAL(10,4)</span><span class="field-desc">calculated reward for session</span></div>
      <div class="field-row"><span class="field-name">ad_views</span><span class="field-type">INT</span><span class="field-desc">ads watched in session</span></div>
      <div class="field-row"><span class="field-name">month_score_contribution</span><span class="field-type">DECIMAL(10,4)</span><span class="field-desc">adds to idle_score_monthly</span></div>
    </div>
  </div>

  <!-- AD REVENUE -->
  <div class="schema-block">
    <div class="schema-header">
      <h3>ad_revenue_log</h3>
      <span class="tag col">prize pool</span>
    </div>
    <div class="schema-fields">
      <div class="field-row"><span class="field-name">id</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag pk">PK</span></span></div>
      <div class="field-row"><span class="field-name">month</span><span class="field-type">DATE</span><span class="field-desc">first day of month (unique)</span></div>
      <div class="field-row"><span class="field-name">total_ad_revenue</span><span class="field-type">DECIMAL(15,4)</span><span class="field-desc">total ad revenue for month</span></div>
      <div class="field-row"><span class="field-name">prize_pool_amount</span><span class="field-type">DECIMAL(15,4)</span><span class="field-desc">20% of total_ad_revenue</span></div>
      <div class="field-row"><span class="field-name">distributed</span><span class="field-type">BOOLEAN</span><span class="field-desc">false until admin triggers payout</span></div>
      <div class="field-row"><span class="field-name">distributed_at</span><span class="field-type">TIMESTAMP</span><span class="field-desc">when admin triggered payout</span></div>
      <div class="field-row"><span class="field-name">distributed_by</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id (admin)</span></div>
    </div>
  </div>

  <!-- SYSTEM CONFIG -->
  <div class="schema-block">
    <div class="schema-header">
      <h3>system_config</h3>
      <span class="tag col">admin-controlled</span>
    </div>
    <div class="schema-fields">
      <div class="field-row"><span class="field-name">key</span><span class="field-type">VARCHAR(100)</span><span class="field-desc"><span class="tag pk">PK</span> config key name</span></div>
      <div class="field-row"><span class="field-name">value</span><span class="field-type">TEXT</span><span class="field-desc">encrypted for sensitive keys</span></div>
      <div class="field-row"><span class="field-name">type</span><span class="field-type">ENUM</span><span class="field-desc">string | number | boolean | json | secret</span></div>
      <div class="field-row"><span class="field-name">group</span><span class="field-type">VARCHAR(50)</span><span class="field-desc">payment | notification | rewards | security | api_keys</span></div>
      <div class="field-row"><span class="field-name">label</span><span class="field-type">VARCHAR(255)</span><span class="field-desc">human-readable name for admin UI</span></div>
      <div class="field-row"><span class="field-name">updated_by</span><span class="field-type">UUID</span><span class="field-desc"><span class="tag fk">FK</span> ‚Üí users.id</span></div>
      <div class="field-row"><span class="field-name">updated_at</span><span class="field-type">TIMESTAMP</span><span class="field-desc"></span></div>
    </div>
  </div>

</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ NETWORK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="network" class="section">
<div class="container">
  <h2>Network & System Design</h2>
  <p class="section-desc">// azure cloud architecture ‚Äî zero cost dev + production-ready</p>

  <div class="diagram">
    <div class="layer">
      <div class="layer-label">CLIENT LAYER</div>
      <div class="layer-nodes">
        <div class="node accent">React Web App<br><small>Admin Panel</small></div>
        <div class="node accent">React Web App<br><small>Manager/Agent</small></div>
        <div class="node accent">React Web App<br><small>User App</small></div>
      </div>
    </div>
    <div class="layer-connector">‚¨á HTTPS / WSS</div>
    <div class="layer">
      <div class="layer-label">EDGE / CDN LAYER</div>
      <div class="layer-nodes">
        <div class="node amber">Azure Front Door<br><small>CDN + WAF</small></div>
        <span class="arrow">‚Üí</span>
        <div class="node amber">Azure Static Web Apps<br><small>Frontend Hosting (Free)</small></div>
      </div>
    </div>
    <div class="layer-connector">‚¨á API Calls</div>
    <div class="layer">
      <div class="layer-label">API GATEWAY LAYER</div>
      <div class="layer-nodes">
        <div class="node purple">Azure API Management<br><small>Rate Limiting + Auth</small></div>
        <span class="arrow">‚Üí</span>
        <div class="node purple">JWT Validation<br><small>RBAC Middleware</small></div>
      </div>
    </div>
    <div class="layer-connector">‚¨á Internal Traffic</div>
    <div class="layer">
      <div class="layer-label">APPLICATION LAYER</div>
      <div class="layer-nodes">
        <div class="node green">Auth Service<br><small>App Service (F1)</small></div>
        <div class="node green">User Service<br><small>App Service</small></div>
        <div class="node green">Transaction Service<br><small>App Service</small></div>
        <div class="node green">Idle/Reward Engine<br><small>App Service</small></div>
        <div class="node green">Admin Config API<br><small>App Service</small></div>
        <div class="node green">Notification Service<br><small>WebSocket</small></div>
      </div>
    </div>
    <div class="layer-connector">‚¨á Data Access</div>
    <div class="layer">
      <div class="layer-label">DATA LAYER</div>
      <div class="layer-nodes">
        <div class="node accent">Azure PostgreSQL<br><small>Flexible Server (Free 12mo)</small></div>
        <div class="node accent">Azure Redis Cache<br><small>Sessions + Leaderboard</small></div>
        <div class="node accent">Azure Blob Storage<br><small>KYC Docs + Screenshots</small></div>
        <div class="node accent">Azure Key Vault<br><small>Secrets + API Keys</small></div>
      </div>
    </div>
    <div class="layer-connector">‚¨á Background Jobs</div>
    <div class="layer">
      <div class="layer-label">ASYNC / JOBS LAYER</div>
      <div class="layer-nodes">
        <div class="node">Azure Service Bus<br><small>Message Queue</small></div>
        <div class="node">Azure Functions<br><small>Cron Jobs (Free tier)</small></div>
        <div class="node">Monthly Prize Cron<br><small>Score Reset + Payout</small></div>
        <div class="node">Email / SMS Notif<br><small>Azure Communication Services</small></div>
      </div>
    </div>
  </div>

  <div class="note">
    üîê <strong>Security:</strong> All inter-service communication over Azure VNet. Secrets stored in Azure Key Vault, never in code or env files. Admin panel reads keys from Key Vault via Managed Identity. HTTPS enforced everywhere via Azure Front Door.
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ FRONTEND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="frontend" class="section">
<div class="container">
  <h2>Frontend Screens</h2>
  <p class="section-desc">// all screens across admin, manager/agent, and user portals</p>

  <div class="screen-group">
    <h3>üîê Auth (Shared)</h3>
    <div class="screen-list">
      <div class="screen-chip highlight">Login</div>
      <div class="screen-chip highlight">Register / Signup</div>
      <div class="screen-chip highlight">Forgot Password</div>
      <div class="screen-chip highlight">OTP Verification</div>
      <div class="screen-chip highlight">KYC Upload</div>
      <div class="screen-chip highlight">2FA Setup</div>
    </div>
  </div>

  <div class="screen-group">
    <h3>üëë Admin Panel</h3>
    <div class="screen-list">
      <div class="screen-chip">Dashboard Overview</div>
      <div class="screen-chip">User Management</div>
      <div class="screen-chip">User Detail / Edit</div>
      <div class="screen-chip">Tier Management</div>
      <div class="screen-chip">Transaction Approvals</div>
      <div class="screen-chip">Deposit Requests</div>
      <div class="screen-chip">Withdrawal Requests</div>
      <div class="screen-chip">KYC Review</div>
      <div class="screen-chip">Manager Management</div>
      <div class="screen-chip">Agent Management</div>
      <div class="screen-chip">Idle Leaderboard</div>
      <div class="screen-chip">Prize Pool Control</div>
      <div class="screen-chip">Ad Revenue Entry</div>
      <div class="screen-chip">System Config Panel</div>
      <div class="screen-chip">API Keys Manager</div>
      <div class="screen-chip">Payment Gateway Config</div>
      <div class="screen-chip">Notification Templates</div>
      <div class="screen-chip">Audit Logs</div>
      <div class="screen-chip">Analytics & Reports</div>
      <div class="screen-chip">Scheduled Jobs</div>
    </div>
  </div>

  <div class="screen-group">
    <h3>üßë‚Äçüíº Manager / Agent Portal</h3>
    <div class="screen-list">
      <div class="screen-chip">Dashboard</div>
      <div class="screen-chip">My Users List</div>
      <div class="screen-chip">User Detail View</div>
      <div class="screen-chip">Deposit Requests</div>
      <div class="screen-chip">Withdrawal Requests</div>
      <div class="screen-chip">Transaction History</div>
      <div class="screen-chip">Leaderboard View</div>
      <div class="screen-chip">Notifications</div>
      <div class="screen-chip">Profile Settings</div>
    </div>
  </div>

  <div class="screen-group">
    <h3>üë§ User Portal (Tier-based)</h3>
    <div class="screen-list">
      <div class="screen-chip">Dashboard / Home</div>
      <div class="screen-chip">Idle Screen (earn mode)</div>
      <div class="screen-chip">Wallet & Balance</div>
      <div class="screen-chip">Deposit</div>
      <div class="screen-chip">Withdrawal</div>
      <div class="screen-chip">Transaction History</div>
      <div class="screen-chip">Referral Program</div>
      <div class="screen-chip">Leaderboard</div>
      <div class="screen-chip">Prize Pool Status</div>
      <div class="screen-chip">My Tier Info</div>
      <div class="screen-chip">KYC Status</div>
      <div class="screen-chip">Profile & Settings</div>
      <div class="screen-chip">Notifications</div>
      <div class="screen-chip">Support / Chat</div>
    </div>
  </div>

  <div class="note">
    ‚ö° <strong>Build order:</strong> Auth screens ‚Üí Admin panel ‚Üí Manager/Agent ‚Üí User portal. The admin panel must be functional first so configs can be set before user-facing features go live.
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ROLES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="roles" class="section">
<div class="container">
  <h2>Roles & Permissions</h2>
  <p class="section-desc">// rbac ‚Äî role based access control across all services</p>

  <div class="grid grid-3">
    <div class="role-card">
      <div class="role-header admin">üëë Admin</div>
      <div class="role-body">
        <ul>
          <li>Full system access</li>
          <li>Create/edit/delete any user</li>
          <li>Approve/reject all transactions</li>
          <li>Manage tiers and rates</li>
          <li>Change all system configs</li>
          <li>View/edit API keys & secrets</li>
          <li>Trigger prize pool payout</li>
          <li>Create/manage managers & agents</li>
          <li>View all audit logs</li>
          <li>Configure payment gateways</li>
          <li>Schedule & run cron jobs</li>
          <li>Access analytics reports</li>
        </ul>
      </div>
    </div>

    <div class="role-card">
      <div class="role-header manager">üßë‚Äçüíº Manager / Agent</div>
      <div class="role-body">
        <ul>
          <li>View assigned users only</li>
          <li>Approve deposits (if permitted)</li>
          <li>Process withdrawals (if permitted)</li>
          <li>View user transaction history</li>
          <li>View leaderboard (read only)</li>
          <li>Send notifications to users</li>
          <li>Update user status (limited)</li>
          <li>View KYC documents</li>
          <li>NO access to system config</li>
          <li>NO access to API keys</li>
          <li>NO access to other managers' users</li>
        </ul>
      </div>
    </div>

    <div class="role-card">
      <div class="role-header user">üë§ User (Tier-gated)</div>
      <div class="role-body">
        <ul>
          <li>View own wallet & balance</li>
          <li>Request deposit</li>
          <li>Request withdrawal (tier limits)</li>
          <li>Run idle sessions</li>
          <li>View own leaderboard rank</li>
          <li>View prize pool status</li>
          <li>Refer other users</li>
          <li>Upload KYC documents</li>
          <li>View tier benefits</li>
          <li>NO access to other users' data</li>
          <li>Features unlock based on tier</li>
        </ul>
      </div>
    </div>
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ADMIN CONFIG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="admin-config" class="section">
<div class="container">
  <h2>Admin Dynamic Config Panel</h2>
  <p class="section-desc">// every dynamic value controlled from admin UI ‚Äî no code changes needed</p>

  <div class="grid grid-2">
    <div class="card purple">
      <span class="card-icon">üí≥</span>
      <h3>Payment Gateway Config</h3>
      <ul>
        <li>Razorpay / Stripe API Key</li>
        <li>Razorpay Secret Key</li>
        <li>Webhook Secret</li>
        <li>UPI VPA / Handle</li>
        <li>Bank Account Details</li>
        <li>Crypto Wallet Address</li>
        <li>Min/Max deposit amounts</li>
        <li>Payment gateway toggle (on/off)</li>
      </ul>
    </div>
    <div class="card cyan">
      <span class="card-icon">üéØ</span>
      <h3>Reward & Rate Config</h3>
      <ul>
        <li>Idle reward rate per hour</li>
        <li>Daily earning cap per tier</li>
        <li>Referral bonus percentage</li>
        <li>Withdrawal processing time</li>
        <li>Minimum withdrawal amount</li>
        <li>Ad revenue prize pool % (20% default)</li>
        <li>Top N winners count (default: 5)</li>
        <li>Monthly reset date</li>
      </ul>
    </div>
    <div class="card green">
      <span class="card-icon">üîî</span>
      <h3>Notification Config</h3>
      <ul>
        <li>SMS provider (Twilio/MSG91) API key</li>
        <li>Email SMTP credentials</li>
        <li>Push notification FCM key</li>
        <li>WhatsApp API token</li>
        <li>Email templates (editable)</li>
        <li>SMS templates</li>
      </ul>
    </div>
    <div class="card amber">
      <span class="card-icon">üîê</span>
      <h3>Security Config</h3>
      <ul>
        <li>JWT secret rotation</li>
        <li>Session timeout duration</li>
        <li>Max login attempts</li>
        <li>IP whitelist/blacklist</li>
        <li>2FA enforcement toggle</li>
        <li>KYC requirement toggle</li>
      </ul>
    </div>
    <div class="card red">
      <span class="card-icon">üìä</span>
      <h3>Ad Revenue Entry</h3>
      <ul>
        <li>Enter monthly total ad revenue</li>
        <li>Auto-calculates 20% prize pool</li>
        <li>Preview top 5 leaderboard</li>
        <li>Per-winner amount preview</li>
        <li>Trigger payout button (admin only)</li>
        <li>Payout history log</li>
      </ul>
    </div>
    <div class="card cyan">
      <span class="card-icon">üåê</span>
      <h3>App Config</h3>
      <ul>
        <li>App name / branding</li>
        <li>Maintenance mode toggle</li>
        <li>Announcement banner text</li>
        <li>Support email / phone</li>
        <li>Social media links</li>
        <li>Terms & Privacy policy URLs</li>
        <li>Feature toggles (enable/disable features)</li>
      </ul>
    </div>
  </div>

  <div class="note">
    üîí <strong>Security:</strong> Sensitive configs (API keys, secrets) are stored encrypted in Azure Key Vault. The admin panel fetches/sets via Managed Identity ‚Äî never exposed in frontend code or network logs.
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PRIZE POOL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="prize" class="section">
<div class="container">
  <h2>Prize Pool System</h2>
  <p class="section-desc">// 20% of monthly ad revenue ‚Üí top 5 idle users</p>

  <div class="highlight-box">
    <h4>üí∞ Prize Pool Formula</h4>
    <p>
      Each month, <code>20%</code> of total ad revenue becomes the prize pool.<br>
      The pool is split equally among the <code>top 5</code> users by idle score.<br>
      Distribution happens on admin-scheduled date via manual trigger.<br><br>
      <strong>Example:</strong> ‚Çπ50,000 ad revenue ‚Üí ‚Çπ10,000 prize pool ‚Üí ‚Çπ2,000 per top 5 winner.
    </p>
  </div>

  <div class="grid grid-2" style="margin-top:16px;">
    <div class="card green">
      <span class="card-icon">üìà</span>
      <h3>Idle Score Calculation</h3>
      <p>Users accumulate score by running idle sessions. Score = (idle time √ó tier multiplier) + (ads watched √ó bonus). Score is tracked in <code>idle_score_monthly</code> field and resets at month end after distribution.</p>
    </div>
    <div class="card amber">
      <span class="card-icon">üèÜ</span>
      <h3>Leaderboard</h3>
      <p>Real-time leaderboard cached in Redis. Updates every idle session end. Visible to all users. Shows rank, username (masked), score, and estimated prize amount based on current pool.</p>
    </div>
    <div class="card cyan">
      <span class="card-icon">üóì</span>
      <h3>Admin Payout Flow</h3>
      <ul>
        <li>Admin enters monthly ad revenue</li>
        <li>System shows prize pool (20%)</li>
        <li>Admin previews top 5 + amounts</li>
        <li>Admin clicks "Distribute Now"</li>
        <li>Balances credited automatically</li>
        <li>Notifications sent to winners</li>
        <li>Monthly scores reset to 0</li>
        <li>Audit log created</li>
      </ul>
    </div>
    <div class="card purple">
      <span class="card-icon">‚öôÔ∏è</span>
      <h3>Configurable by Admin</h3>
      <ul>
        <li>Prize pool % (default 20%)</li>
        <li>Number of winners (default 5)</li>
        <li>Split method (equal / weighted)</li>
        <li>Payout trigger (manual / auto)</li>
        <li>Score reset timing</li>
      </ul>
    </div>
  </div>
</div>
</div>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ AZURE INFRA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="infra" class="section">
<div class="container">
  <h2>Azure Infrastructure</h2>
  <p class="section-desc">// free tier services for development ‚Üí scalable for production</p>

  <div class="grid grid-2">
    <div class="card cyan">
      <span class="card-icon">üÜì</span>
      <h3>Dev/Test (Free Tier)</h3>
      <ul>
        <li>Azure Static Web Apps ‚Äî Free</li>
        <li>Azure App Service F1 ‚Äî Free (60 min/day compute)</li>
        <li>Azure PostgreSQL Flexible ‚Äî Free 12 months</li>
        <li>Azure Functions ‚Äî 1M executions/month free</li>
        <li>Azure Blob Storage ‚Äî 5GB free 12 months</li>
        <li>Azure Key Vault ‚Äî 10,000 operations free</li>
        <li>Azure AD B2C ‚Äî 50,000 MAU free</li>
      </ul>
    </div>
    <div class="card green">
      <span class="card-icon">üöÄ</span>
      <h3>Production (Paid, Scalable)</h3>
      <ul>
        <li>Azure App Service B1 ‚Üí P2 (auto-scale)</li>
        <li>Azure PostgreSQL ‚Äî General Purpose</li>
        <li>Azure Redis Cache C0 ‚Üí C2</li>
        <li>Azure Front Door Standard</li>
        <li>Azure API Management Consumption</li>
        <li>Azure Monitor + Application Insights</li>
        <li>Azure DevOps (CI/CD pipelines)</li>
      </ul>
    </div>
  </div>

  <div class="grid grid-3" style="margin-top:16px;">
    <div class="card amber">
      <span class="card-icon">üîÑ</span>
      <h3>CI/CD Pipeline</h3>
      <p>GitHub ‚Üí Azure DevOps. Auto-deploy on push to main. Staging environment for testing. Feature flags for gradual rollout.</p>
    </div>
    <div class="card purple">
      <span class="card-icon">üìä</span>
      <h3>Monitoring</h3>
      <p>Azure Application Insights for APM. Azure Monitor for alerts. Log Analytics workspace. Real-time error tracking.</p>
    </div>
    <div class="card cyan">
      <span class="card-icon">üíæ</span>
      <h3>Backups</h3>
      <p>Azure PostgreSQL automated backups (7-day retention free). Blob storage geo-redundant. Point-in-time restore available.</p>
    </div>
  </div>

  <div class="note">
    üìã <strong>Recommended Dev Setup:</strong> Run backend locally (localhost:3000) + Azure PostgreSQL free tier for DB. Frontend on Azure Static Web Apps. This gives full Azure integration at $0 cost during development and testing.
  </div>
</div>
</div>

<script>
  function show(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>

</body>
</html>
